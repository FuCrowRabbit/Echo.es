"use strict";!function(t,o){"function"==typeof define&&define.amd?define(function(){return o(void 0)}):"object"==typeof exports?module.exports=o:(void 0).echo=o(void 0)}(0,function(t){const o={};return o.init=function(t={}){void 0!==t.offset&&console.warn("EchoOption.offset was deleted options."),void 0!==t.offsetTop&&console.warn("EchoOption.offsetTop was deleted options."),void 0!==t.offsetBottom&&console.warn("EchoOption.offsetBottom was deleted options."),void 0!==t.offsetLeft&&console.warn("EchoOption.offsetLeft was deleted options."),void 0!==t.offsetRight&&console.warn("EchoOption.offsetRight was deleted options."),void 0!==t.throttle&&console.warn("EchoOption.throttle was deleted options."),void 0!==t.debounce&&console.warn("EchoOption.debounce was deleted options.");const o=function(t){return{root:t.root instanceof HTMLElement?t.root:null,rootMargin:"string"==typeof t.rootMargin?t.rootMargin:null,threshold:"number"==typeof t.threshold||Array.isArray(t.threshold)?t.threshold:null,unload:!!t.unload,callback:"function"==typeof t.callback?t.callback:()=>{}}}(t),e=o.unload,a=o.callback,r=document.querySelectorAll("[data-echo], [data-echo-zoo], [data-echo-background]"),n=new IntersectionObserver(function(t){t.forEach(function(t){let o,r=[];const n=t.target;if(t.isIntersecting)e&&(n.setAttribute("data-echo-placeholder",n.src),[...n.attributes].map(t=>t.name.match(/data-echo-zoo-(.+)/)).filter(t=>Array.isArray(t)&&void 0!==t[1]).forEach(t=>{n.hasAttribute(`data-echo-placeholder-zoo-${t[1]}`)||n.setAttribute(`data-echo-placeholder-zoo-${t[1]}`,n.getAttribute(t[1]))})),null!==n.getAttribute("data-echo-background")?n.style.backgroundImage="url("+n.getAttribute("data-echo-background")+")":n instanceof HTMLImageElement&&n.src!==(o=n.getAttribute("data-echo"))&&(n.src=o),[...n.attributes].map(t=>t.name.match(/data-echo-zoo-(.+)/)).filter(t=>Array.isArray(t)&&void 0!==t[1]).forEach(t=>{n.setAttribute(t[1],n.getAttribute(`data-echo-zoo-${t[1]}`)),r.push(`data-echo-zoo-${t[1]}`)}),e||(n.removeAttribute("data-echo"),n.removeAttribute("data-echo-background"),n.removeAttribute("data-echo-zoo"),r.forEach(t=>n.removeAttribute(t))),a(t,"load");else{let e=!1;(o=n.getAttribute("data-echo-placeholder"))&&(null!==n.getAttribute("data-echo-background")?n.style.backgroundImage="url("+o+")":n.src=o,n.removeAttribute("data-echo-placeholder"),e=!0),[...n.attributes].map(t=>t.name.match(/data-echo-placeholder-zoo-(.+)/)).filter(t=>Array.isArray(t)&&void 0!==t[1]).forEach(t=>{n.setAttribute(t[1],n.getAttribute(`data-echo-placeholder-zoo-${t[1]}`)),n.removeAttribute(`data-echo-placeholder-zoo-${t[1]}`),e=!0}),e&&a(t,"unload")}})},(t=>(Object.entries(t).forEach(([o,e])=>null==e||""===e?delete t[o]:null),t))({root:o.root,rootMargin:o.rootMargin,threshold:o.threshold}));[...r].forEach(function(t){n.observe(t)})},o});