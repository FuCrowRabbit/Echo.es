"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:t.echo=e(t)}(this,function(t){var e,o,n,r,a,c={},f=function(){},u=function(){!r&&o||(clearTimeout(o),o=setTimeout(function(){c.render(),o=null},n))};return c.init=function(){var o=function(t){var e=function(t,e){return parseInt(t||e,10)},o=e(t.offset,0),n=e(t.offsetVertical,o),r=e(t.offsetHorizontal,o);return{offset:o,offsetVertical:n,offsetHorizontal:r,offsetTop:e(t.offsetTop,n),offsetBottom:e(t.offsetBottom,n),offsetLeft:e(t.offsetLeft,r),offsetRight:e(t.offsetRight,r),throttle:e(t.throttle,250),debounce:!1!==t.debounce,unload:!!t.unload,callback:t.callback||f}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});e={top:o.offsetTop,bottom:o.offsetBottom,left:o.offsetLeft,right:o.offsetRight},n=o.throttle,r=o.debounce,a=o.unload,f=o.callback,c.render(),document.addEventListener?(t.addEventListener("scroll",u,!1),t.addEventListener("load",u,!1)):(t.attachEvent("onscroll",u),t.attachEvent("onload",u))},c.render=function(){var o=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||document).querySelectorAll("[data-echo], [data-echo-zoo], [data-echo-background]"),n=o.length,r={left:0-e.left,top:0-e.top,bottom:(t.innerHeight||document.documentElement.clientHeight)+e.bottom,right:(t.innerWidth||document.documentElement.clientWidth)+e.right};NamedNodeMap.prototype.filter=Array.prototype.filter,NamedNodeMap.prototype.map=Array.prototype.map,o.forEach(function(t){var e,o=[];!function(t,e){if(function(t){return null===t.offsetParent}(t))return!1;var o=t.getBoundingClientRect();return o.right>=e.left&&o.bottom>=e.top&&o.left<=e.right&&o.top<=e.bottom}(t,r)?a&&(e=t.getAttribute("data-echo-placeholder"))&&(null!==t.getAttribute("data-echo-background")?t.style.backgroundImage="url("+e+")":t.src=e,t.removeAttribute("data-echo-placeholder"),f(t,"unload")):(a&&t.setAttribute("data-echo-placeholder",t.src),null!==t.getAttribute("data-echo-background")?t.style.backgroundImage="url("+t.getAttribute("data-echo-background")+")":t instanceof HTMLImageElement&&t.src!==(e=t.getAttribute("data-echo"))&&(t.src=e),t.attributes.map(function(t){return t.name.match(/data-echo-zoo-(.+)/)}).filter(function(t){return Array.isArray(t)&&void 0!==t[1]}).forEach(function(e){t.setAttribute(e[1],t.getAttribute("data-echo-zoo-".concat(e[1]))),o.push("data-echo-zoo-".concat(e[1]))}),a||(t.removeAttribute("data-echo"),t.removeAttribute("data-echo-background"),t.removeAttribute("data-echo-zoo"),o.forEach(function(e){return t.removeAttribute(e)})),f(t,"load"))}),n||c.detach()},c.detach=function(){document.removeEventListener?t.removeEventListener("scroll",u):t.detachEvent("onscroll",u),clearTimeout(o)},c});